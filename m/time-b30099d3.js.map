{"version":3,"file":"time-b30099d3.js","sources":["../../src/hook/time.js"],"sourcesContent":["\nconst useAddTimer = (cb, time = 1000) => {\n  let timer = null\n\n  onBeforeMount(() => {\n    timer = setInterval(cb, time)\n  })\n\n  onBeforeUnmount(() => {\n    clearInterval(timer)\n    timer = null\n  })\n}\n\nconst zeroPadding = (value) => {\n  return value.toString().length == 1 ? `0${value}` : value\n}\nconst useCountdown = (time) => {\n  const countdown = reactive({\n    day: '',\n    hours: '',\n    minutes: '',\n    seconds: '',\n    exceed: false,\n  })\n\n  const getCountdown = () => {\n    const now = dayjs()\n    const t = isFunc(time) ? time() : time\n    const diffTime = dayjs.duration(t - now)\n    const day = diffTime.days() // 天\n    const hours = diffTime.hours() // 小时\n    const minutes = diffTime.minutes() // 分钟\n    const seconds = diffTime.seconds() // 秒\n    return { day: Math.max(day, 0), hours: Math.max(hours, 0), minutes: Math.max(minutes, 0), seconds: Math.max(seconds, 0), exceed: t - now < 0 }\n  }\n\n  const refreshCountdown = () => {\n    const { day, hours, minutes, seconds, exceed } = getCountdown()\n\n    countdown.day = zeroPadding(isNaN(day) ? '00' : day)\n    countdown.hours = zeroPadding(isNaN(hours) ? '00' : hours)\n    countdown.minutes = zeroPadding(isNaN(minutes) ? '00' : minutes)\n    countdown.seconds = zeroPadding(isNaN(seconds) ? '00' : seconds)\n    countdown.exceed = exceed\n  }\n\n  useAddTimer(refreshCountdown)\n\n  return { countdown }\n}\n\nexport { useCountdown, useAddTimer }\n"],"names":["useAddTimer","cb","time","timer","onBeforeMount","setInterval","onBeforeUnmount","clearInterval","zeroPadding","value","toString","length","useCountdown","countdown","reactive","day","hours","minutes","seconds","exceed","now","dayjs","t","isFunc","diffTime","duration","days","Math","max","getCountdown","isNaN"],"mappings":"wJACK,MAACA,EAAc,CAACC,EAAIC,EAAO,OAC9B,IAAIC,EAAQ,KAEZC,GAAc,KACJD,EAAAE,YAAYJ,EAAIC,EAAI,IAG9BI,GAAgB,KACdC,cAAcJ,GACNA,EAAA,IAAA,GACT,EAGGK,EAAeC,GACe,GAA3BA,EAAMC,WAAWC,OAAc,IAAIF,IAAUA,EAEhDG,EAAgBV,IACpB,MAAMW,EAAYC,EAAS,CACzBC,IAAK,GACLC,MAAO,GACPC,QAAS,GACTC,QAAS,GACTC,QAAQ,IA0BV,OAFAnB,GAVyB,KACvB,MAAMe,IAAEA,EAAKC,MAAAA,EAAAC,QAAOA,UAASC,EAASC,OAAAA,GAZnB,MACnB,MAAMC,EAAMC,IACNC,EAAIC,EAAOrB,GAAQA,IAASA,EAC5BsB,EAAWH,EAAMI,SAASH,EAAIF,GAC9BL,EAAMS,EAASE,OACfV,EAAQQ,EAASR,QACjBC,EAAUO,EAASP,UACnBC,EAAUM,EAASN,UACzB,MAAO,CAAEH,IAAKY,KAAKC,IAAIb,EAAK,GAAIC,MAAOW,KAAKC,IAAIZ,EAAO,GAAIC,QAASU,KAAKC,IAAIX,EAAS,GAAIC,QAASS,KAAKC,IAAIV,EAAS,GAAIC,OAAQG,EAAIF,EAAM,EAAG,EAI7FS,GAEjDhB,EAAUE,IAAMP,EAAYsB,EAAMf,GAAO,KAAOA,GAChDF,EAAUG,MAAQR,EAAYsB,EAAMd,GAAS,KAAOA,GACpDH,EAAUI,QAAUT,EAAYsB,EAAMb,GAAW,KAAOA,GACxDJ,EAAUK,QAAUV,EAAYsB,EAAMZ,GAAW,KAAOA,GACxDL,EAAUM,OAASA,CAAA,IAKd,CAAEN,YAAW"}