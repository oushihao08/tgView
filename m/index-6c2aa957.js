import{r as e,Y as a,k as t,ac as o,aj as n,c as l,J as s,w as i,n as r,b as u,ah as p,s as d,v as c,M as f,N as v,$ as m,F as y,P as x,u as b,O as g,Z as h,R as w,S,W as k,q as z,j as C,_ as I,a6 as j,U as E,Q as $,a3 as F}from"./vue-10f3042e.js";import{u as P}from"./index-5cef0a1f.js";import{b as M,e as V,v as _,x as B,E as N,o as R,_ as A,w as O}from"./index-8763a24f.js";import{i as H,u as T,c as W}from"./index-dea076ad.js";import{d as K,i as L,b as U,c as q,V as D}from"./index-ee5248b7.js";import{m as J,U as Q}from"./typescript-58f7230d.js";import{u as Y}from"./index-9ef2549a.js";import{u as Z,a as G}from"./index-2f89133e.js";import{d as X}from"./error-e384bc30.js";import{i as ee}from"./lodash-es-87d81e2d.js";let ae;const te=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function oe(e,a=1,t){var o;ae||(ae=document.createElement("textarea"),document.body.appendChild(ae));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:i}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),n=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:te.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:t}}(e);ae.setAttribute("style",`${i};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),ae.value=e.value||e.placeholder||"";let r=ae.scrollHeight;const u={};"border-box"===s?r+=l:"content-box"===s&&(r-=n),ae.value="";const p=ae.scrollHeight-n;if(H(a)){let e=p*a;"border-box"===s&&(e=e+n+l),r=Math.max(e,r),u.minHeight=`${e}px`}if(H(t)){let e=p*t;"border-box"===s&&(e=e+n+l),r=Math.min(e,r)}return u.height=`${r}px`,null==(o=ae.parentNode)||o.removeChild(ae),ae=void 0,u}const ne=M({id:{type:String,default:void 0},size:K,disabled:Boolean,modelValue:{type:V([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:V([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:L},prefixIcon:{type:L},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:V([Object,Array,String]),default:()=>J({})}}),le={[Q]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},se=["role"],ie=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],re=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],ue=t({name:"ElInput",inheritAttrs:!1});const pe=O(A(t({...ue,props:ne,emits:le,setup(a,{expose:t,emit:M}){const V=a,A=o(),O=n(),H=l((()=>{const e={};return"combobox"===V.containerRole&&(e["aria-haspopup"]=A["aria-haspopup"],e["aria-owns"]=A["aria-owns"],e["aria-expanded"]=A["aria-expanded"]),e})),K=l((()=>["textarea"===V.type?de.b():pe.b(),pe.m(le.value),pe.is("disabled",ue.value),pe.is("exceed",Me.value),{[pe.b("group")]:O.prepend||O.append,[pe.bm("group","append")]:O.append,[pe.bm("group","prepend")]:O.prepend,[pe.m("prefix")]:O.prefix||V.prefixIcon,[pe.m("suffix")]:O.suffix||V.suffixIcon||V.clearable||V.showPassword,[pe.bm("suffix","password-clear")]:Ee.value&&$e.value},A.class])),L=l((()=>[pe.e("wrapper"),pe.is("focus",ve.value)])),J=Y({excludeKeys:l((()=>Object.keys(H.value)))}),{form:ae,formItem:te}=Z(),{inputId:ne}=G(V,{formItemContext:te}),le=U(),ue=q(),pe=T("input"),de=T("textarea"),ce=s(),fe=s(),ve=e(!1),me=e(!1),ye=e(!1),xe=e(!1),be=e(),ge=s(V.inputStyle),he=l((()=>ce.value||fe.value)),we=l((()=>{var e;return null!=(e=null==ae?void 0:ae.statusIcon)&&e})),Se=l((()=>(null==te?void 0:te.validateState)||"")),ke=l((()=>Se.value&&D[Se.value])),ze=l((()=>xe.value?_:B)),Ce=l((()=>[A.style,V.inputStyle])),Ie=l((()=>[V.inputStyle,ge.value,{resize:V.resize}])),je=l((()=>ee(V.modelValue)?"":String(V.modelValue))),Ee=l((()=>V.clearable&&!ue.value&&!V.readonly&&!!je.value&&(ve.value||me.value))),$e=l((()=>V.showPassword&&!ue.value&&!V.readonly&&!!je.value&&(!!je.value||ve.value))),Fe=l((()=>V.showWordLimit&&!!J.value.maxlength&&("text"===V.type||"textarea"===V.type)&&!ue.value&&!V.readonly&&!V.showPassword)),Pe=l((()=>Array.from(je.value).length)),Me=l((()=>!!Fe.value&&Pe.value>Number(J.value.maxlength))),Ve=l((()=>!!O.suffix||!!V.suffixIcon||Ee.value||V.showPassword||Fe.value||!!Se.value&&we.value)),[_e,Be]=function(a){const t=e();return[function(){if(null==a.value)return;const{selectionStart:e,selectionEnd:o,value:n}=a.value;if(null==e||null==o)return;const l=n.slice(0,Math.max(0,e)),s=n.slice(Math.max(0,o));t.value={selectionStart:e,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==a.value||null==t.value)return;const{value:e}=a.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=e.length;if(e.endsWith(n))s=e.length-n.length;else if(e.startsWith(o))s=o.length;else{const a=o[l-1],t=e.indexOf(a,l-1);-1!==t&&(s=t+1)}a.value.setSelectionRange(s,s)}]}(ce);P(fe,(e=>{if(!Fe.value||"both"!==V.resize)return;const a=e[0],{width:t}=a.contentRect;be.value={right:`calc(100% - ${t+15+6}px)`}}));const Ne=()=>{const{type:e,autosize:a}=V;if(W&&"textarea"===e)if(a){const e=F(a)?a.minRows:void 0,t=F(a)?a.maxRows:void 0;ge.value={...oe(fe.value,e,t)}}else ge.value={minHeight:oe(fe.value).minHeight}},Re=()=>{const e=he.value;e&&e.value!==je.value&&(e.value=je.value)},Ae=async e=>{_e();let{value:a}=e.target;V.formatter&&(a=V.parser?V.parser(a):a,a=V.formatter(a)),ye.value||(a!==je.value?(M(Q,a),M("input",a),await r(),Re(),Be()):Re())},Oe=e=>{M("change",e.target.value)},He=e=>{M("compositionstart",e),ye.value=!0},Te=e=>{var a;M("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";ye.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(o)},We=e=>{M("compositionend",e),ye.value&&(ye.value=!1,Ae(e))},Ke=()=>{xe.value=!xe.value,Le()},Le=async()=>{var e;await r(),null==(e=he.value)||e.focus()},Ue=e=>{ve.value=!0,M("focus",e)},qe=e=>{var a;ve.value=!1,M("blur",e),V.validateEvent&&(null==(a=null==te?void 0:te.validate)||a.call(te,"blur").catch((e=>X())))},De=e=>{me.value=!1,M("mouseleave",e)},Je=e=>{me.value=!0,M("mouseenter",e)},Qe=e=>{M("keydown",e)},Ye=()=>{M(Q,""),M("change",""),M("clear"),M("input","")};return i((()=>V.modelValue),(()=>{var e;r((()=>Ne())),V.validateEvent&&(null==(e=null==te?void 0:te.validate)||e.call(te,"change").catch((e=>X())))})),i(je,(()=>Re())),i((()=>V.type),(async()=>{await r(),Re(),Ne()})),u((()=>{!V.formatter&&V.parser,Re(),r(Ne)})),t({input:ce,textarea:fe,ref:he,textareaStyle:Ie,autosize:p(V,"autosize"),focus:Le,blur:()=>{var e;return null==(e=he.value)?void 0:e.blur()},select:()=>{var e;null==(e=he.value)||e.select()},clear:Ye,resizeTextarea:Ne}),(e,a)=>d((f(),v("div",z(b(H),{class:b(K),style:b(Ce),role:e.containerRole,onMouseenter:Je,onMouseleave:De}),[m(" input "),"textarea"!==e.type?(f(),v(y,{key:0},[m(" prepend slot "),e.$slots.prepend?(f(),v("div",{key:0,class:x(b(pe).be("group","prepend"))},[g(e.$slots,"prepend")],2)):m("v-if",!0),h("div",{class:x(b(L))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),v("span",{key:0,class:x(b(pe).e("prefix"))},[h("span",{class:x(b(pe).e("prefix-inner")),onClick:Le},[g(e.$slots,"prefix"),e.prefixIcon?(f(),w(b(N),{key:0,class:x(b(pe).e("icon"))},{default:S((()=>[(f(),w(k(e.prefixIcon)))])),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),h("input",z({id:b(ne),ref_key:"input",ref:ce,class:b(pe).e("inner")},b(J),{type:e.showPassword?xe.value?"text":"password":e.type,disabled:b(ue),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:V.form,onCompositionstart:He,onCompositionupdate:Te,onCompositionend:We,onInput:Ae,onFocus:Ue,onBlur:qe,onChange:Oe,onKeydown:Qe}),null,16,ie),m(" suffix slot "),b(Ve)?(f(),v("span",{key:1,class:x(b(pe).e("suffix"))},[h("span",{class:x(b(pe).e("suffix-inner")),onClick:Le},[b(Ee)&&b($e)&&b(Fe)?m("v-if",!0):(f(),v(y,{key:0},[g(e.$slots,"suffix"),e.suffixIcon?(f(),w(b(N),{key:0,class:x(b(pe).e("icon"))},{default:S((()=>[(f(),w(k(e.suffixIcon)))])),_:1},8,["class"])):m("v-if",!0)],64)),b(Ee)?(f(),w(b(N),{key:1,class:x([b(pe).e("icon"),b(pe).e("clear")]),onMousedown:I(b(j),["prevent"]),onClick:Ye},{default:S((()=>[C(b(R))])),_:1},8,["class","onMousedown"])):m("v-if",!0),b($e)?(f(),w(b(N),{key:2,class:x([b(pe).e("icon"),b(pe).e("password")]),onClick:Ke},{default:S((()=>[(f(),w(k(b(ze))))])),_:1},8,["class"])):m("v-if",!0),b(Fe)?(f(),v("span",{key:3,class:x(b(pe).e("count"))},[h("span",{class:x(b(pe).e("count-inner"))},E(b(Pe))+" / "+E(b(J).maxlength),3)],2)):m("v-if",!0),b(Se)&&b(ke)&&b(we)?(f(),w(b(N),{key:4,class:x([b(pe).e("icon"),b(pe).e("validateIcon"),b(pe).is("loading","validating"===b(Se))])},{default:S((()=>[(f(),w(k(b(ke))))])),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(f(),v("div",{key:1,class:x(b(pe).be("group","append"))},[g(e.$slots,"append")],2)):m("v-if",!0)],64)):(f(),v(y,{key:1},[m(" textarea "),h("textarea",z({id:b(ne),ref_key:"textarea",ref:fe,class:b(de).e("inner")},b(J),{tabindex:e.tabindex,disabled:b(ue),readonly:e.readonly,autocomplete:e.autocomplete,style:b(Ie),"aria-label":e.label,placeholder:e.placeholder,form:V.form,onCompositionstart:He,onCompositionupdate:Te,onCompositionend:We,onInput:Ae,onFocus:Ue,onBlur:qe,onChange:Oe,onKeydown:Qe}),null,16,re),b(Fe)?(f(),v("span",{key:0,style:$(be.value),class:x(b(pe).e("count"))},E(b(Pe))+" / "+E(b(J).maxlength),7)):m("v-if",!0)],64))],16,se)),[[c,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{pe as E};
//# sourceMappingURL=index-6c2aa957.js.map
