import{_ as a}from"./Page-f5afd189.js";import{f as s}from"./vant-f0b40d2b.js";import{g as e,P as l,d as t,e as n,a as o,_ as r,s as i}from"../js/index-v1.1.28-fb871f79.js";import{u}from"./vue-router-d1467f91.js";import"./vendor-f8157dbf.js";/* empty css             *//* empty css               *//* empty css                *//* empty css                 *//* empty css              *//* empty css                                                 */import{r as d,a as f,c,L as b,b as m,M as p,R as v,S as g,j as _,Z as y,U as h,N as w,a0 as j,F as x,P as R}from"./vue-10f3042e.js";import"./vue-i18n-d608650a.js";import"./__commonjsHelpers__-5b8a0dfb.js";const $={class:"label-sm c-info"},D={class:"font-38"},N=y("span",{class:"label-sm m-l-10 m-b-6"},"USDT",-1),S={class:"label bold"},U={class:"label-sm c-info"},k={class:"c-info"},H={class:""},L={class:"c-info"},M={class:""},P={class:"m-r-4"},Y=y("span",null,"USDT",-1),T={class:"c-info"},A=y("div",{class:"w-100b border-b m-t-30"},null,-1),C={__name:"Incentives",setup(C){e(),u();const I=()=>{t.go(-1)};let B=d(!1),F=d(!1),V=d([]),Z=d();const q=f({...l}),z=c((()=>[{label:$t("public.inProgress"),value:0,color:"c-warning"},{label:$t("public.issued"),value:1,color:"c-success"},{label:$t("public.finished"),value:2,color:"c-info"}])),E=c((()=>{var a;return 1==B.value||(null==(a=V.value)?void 0:a.length)==Z.value})),G=async()=>{var a,s;try{F.value=!0,q.pageNum=1;const e={},l=await n.myReward(e);V.value=null!=(a=l.filter((a=>a.open)).map(((a,s)=>({...a,index:s+1}))))?a:[],Z.value=null==(s=V.value)?void 0:s.length}finally{F.value=!1}},J=()=>{q.pageNum=q.pageNum+1,(async()=>{var a,s;try{B.value=!0;const e={},l=await n.myReward(e);V.value=null!=(a=l.filter((a=>a.open)).map(((a,s)=>({...a,index:s+1}))))?a:[],Z.value=null==(s=V.value)?void 0:s.length,i(V.value)?V.value.push(...ls):V.value=ls}finally{B.value=!1}})()};return b((()=>{G()})),m((()=>{})),(e,l)=>{const t=o,n=r,i=s,u=a;return p(),v(u,{isRefresh:F.value,"onUpdate:isRefresh":l[1]||(l[1]=a=>F.value=a),title:e.$t("activity.myRewards"),hideHeader:"",openRefresh:!0,onRefresh:G,onClickLeft:I,border:!1,bodyClass:"bg-white"},{default:g((()=>[_(i,{loading:B.value,"onUpdate:loading":l[0]||(l[0]=a=>B.value=a),class:"w-100b f-1",finished:E.value,"finished-text":e.$t("form.noMoreData"),"loading-text":e.$t("form.loading"),onRefresh:G,onLoad:J},{default:g((()=>[_(t,{class:"w-100b p-lr-30 m-b-30 m-t-20"},{default:g((()=>[_(n,{class:"w-100b bg-line p-lr-30 radius-8 h-150",y:"c"},{default:g((()=>[y("span",$,h(e.$t("activity.totalIncentive")),1),_(t,{class:"bold",y:"e"},{default:g((()=>[y("span",D,h(V.value.reduce(((a,s)=>e.BigNumber(a).plus(s.rewardAmount)),0)),1),N])),_:1})])),_:1})])),_:1}),(p(!0),w(x,null,j(V.value,(a=>(p(),v(n,{key:a,class:"w-100b p-30 p-b-0"},{default:g((()=>[_(t,{class:"w-100b m-b-22",x:"sb",y:"s"},{default:g((()=>[y("span",S,h(a.taskTitle),1),y("span",U,h(a.time?e.dayjs(a.time).format("YYYY-MM-DD HH:mm:ss"):"--"),1)])),_:2},1024),_(t,{class:"w-100b label-sm m-b-10",x:"sb",y:"s"},{default:g((()=>[y("span",k,h(e.$t("table.progress")),1),y("span",H,h(a.progress),1)])),_:2},1024),_(t,{class:"w-100b label-sm m-b-10",x:"sb",y:"s"},{default:g((()=>[y("span",L,h(e.$t("table.rewards")),1),y("span",M,[y("span",P,h(a.rewardAmount),1),Y])])),_:2},1024),_(t,{class:"w-100b label-sm m-b-10",x:"sb",y:"s"},{default:g((()=>{var s,l;return[y("span",T,h(e.$t("table.status")),1),y("span",{class:R(null==(s=z.value.find((s=>s.value==a.progressStatus)))?void 0:s.color)},h(null==(l=z.value.find((s=>a.progressStatus==s.value)))?void 0:l.label),3)]})),_:2},1024),A])),_:2},1024)))),128))])),_:1},8,["loading","finished","finished-text","loading-text"])])),_:1},8,["isRefresh","title"])}}};export{C as default};
//# sourceMappingURL=Incentives-96c6f485.js.map
