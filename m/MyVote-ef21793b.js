import{_ as a}from"./Page-1004bdb8.js";import{f as e}from"./vant-f0b40d2b.js";import{g as l,P as s,d as t,s as o,a as i,_ as n}from"../js/index-v1.1.28-f4a5fda3.js";import{v as u,_ as r}from"./Num-03be29d8.js";import{u as d}from"./vue-router-612eab41.js";import"./vendor-f8157dbf.js";/* empty css             *//* empty css               *//* empty css                *//* empty css                 *//* empty css              *//* empty css                                                 */import{r as v,a as b,c,L as f,b as p,M as m,R as y,S as _,j as h,N as j,a0 as g,F as x,Z as $,U as w,y as M}from"./vue-10f3042e.js";import"./vue-i18n-d608650a.js";import"./__commonjsHelpers__-5b8a0dfb.js";const R=["src"],N={class:"label-lg bold"},H={class:"label-sm c-info"},I={class:"c-info"},L={class:"bold"},U={class:"c-info"},Y={class:"bold"},k={class:"m-l-4"},D={class:"c-info"},T={class:"bold"},V=$("div",{class:"w-100b border-b m-t-30"},null,-1),q={__name:"MyVote",setup(q){l();const C=d(),F=()=>{t.go(-1)};let P=v(!1),A=v(!1),B=v([]),E=v();const S=b({...s}),Z=c((()=>[{label:$t("public.success"),value:1},{label:$t("public.failure"),value:0}])),z=c((()=>[{label:$t("vote.typeMap.0"),value:0},{label:$t("vote.typeMap.1"),value:1},{label:$t("vote.typeMap.2"),value:2},{label:$t("vote.typeMap.3"),value:3}])),G=c((()=>{var a;return 1==P.value||(null==(a=B.value)?void 0:a.length)==E.value})),J=async()=>{var a,e;try{A.value=!0,S.pageNum=1;const l={activityId:C.query.activityId,...S},s=await u.history(l);B.value=null!=(e=null==(a=s.records)?void 0:a.map(((a,e)=>({...a,index:e+1}))))?e:[],E.value=s.total}finally{A.value=!1}},K=()=>{S.pageNum=S.pageNum+1,(async()=>{var a,e;try{P.value=!0;const l={activityId:C.query.activityId,...S},s=await u.history(l),t=null!=(e=null==(a=s.records)?void 0:a.map(((a,e)=>({...a,index:e+1}))))?e:[];o(B.value)?B.value.push(...t):B.value=t,E.value=s.total}finally{P.value=!1}})()};return f((()=>{J()})),p((()=>{})),(l,s)=>{const t=i,o=r,u=n,d=e,v=a;return m(),y(v,{isRefresh:A.value,"onUpdate:isRefresh":s[1]||(s[1]=a=>A.value=a),title:l.$t("vote.myVote"),hideHeader:"",openRefresh:!0,onRefresh:J,onClickLeft:F,bodyClass:"bg-white"},{default:_((()=>[h(d,{loading:P.value,"onUpdate:loading":s[0]||(s[0]=a=>P.value=a),class:"w-100b f-1",finished:G.value,"finished-text":l.$t("form.noMoreData"),"loading-text":l.$t("form.loading"),onRefresh:J,onLoad:K},{default:_((()=>[(m(!0),j(x,null,g(B.value,(a=>(m(),y(u,{key:a,class:"w-100b p-30 p-b-0"},{default:_((()=>[h(t,{class:"w-100b m-b-20",x:"sb",y:"s"},{default:_((()=>[h(t,null,{default:_((()=>[$("img",{class:"w-40 h-40 m-r-10",src:a.iconUrl,alt:""},null,8,R),$("span",N,w(a.coinName),1)])),_:2},1024),$("span",H,w(l.dayjs(a.recordTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:2},1024),h(t,{class:"w-100b label-sm m-b-10",x:"sb",y:"s"},{default:_((()=>{var e;return[$("span",I,w(l.$t("vote.inTheEnd")),1),$("span",L,w(null==(e=Z.value.find((e=>a.voteResult==e.value)))?void 0:e.label),1)]})),_:2},1024),h(t,{class:"w-100b label-sm m-b-10",x:"sb",y:"s"},{default:_((()=>[$("span",U,w(l.$t("table.number")),1),$("span",Y,[h(o,null,{default:_((()=>[M(w(a.voteAmount),1)])),_:2},1024),$("span",k,w(2!=a.type?"BFT":a.coinName),1)])])),_:2},1024),h(t,{class:"w-100b label-sm",x:"sb",y:"s"},{default:_((()=>{var e;return[$("span",D,w(l.$t("public.type")),1),$("span",T,w(null==(e=z.value.find((e=>a.type==e.value)))?void 0:e.label),1)]})),_:2},1024),V])),_:2},1024)))),128))])),_:1},8,["loading","finished","finished-text","loading-text"])])),_:1},8,["isRefresh","title"])}}};export{q as default};
//# sourceMappingURL=MyVote-ef21793b.js.map
