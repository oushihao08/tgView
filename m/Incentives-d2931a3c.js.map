{"version":3,"file":"Incentives-d2931a3c.js","sources":["../../src/view/activity/Incentives.vue"],"sourcesContent":["<template>\n  <Page\n    v-model:isRefresh=\"isRefresh\"\n    :title=\"$t('activity.myRewards')\"\n    hideHeader\n    :openRefresh=\"true\"\n    :onRefresh=\"onRefresh\"\n    :onClickLeft=\"onClickLeft\"\n    :border=\"false\"\n    bodyClass=\"bg-white\"\n  >\n    <van-list\n      v-model:loading=\"loading\"\n      class=\"w-100b f-1\"\n      :finished=\"finished\"\n      :finished-text=\"$t('form.noMoreData')\"\n      :loading-text=\"$t('form.loading')\"\n      @refresh=\"onRefresh\"\n      @load=\"onLoad\"\n    >\n      <Row class=\"w-100b p-lr-30 m-b-30 m-t-20\">\n        <Column class=\"w-100b bg-line p-lr-30  radius-8 h-150\" y=\"c\">\n          <span class=\"label-sm c-info\">{{ $t('activity.totalIncentive') }}</span>\n          <Row class=\"bold\" y=\"e\">\n            <span class=\"font-38\">{{ list.reduce((o, e) => BigNumber(o).plus(e.rewardAmount), 0) }}</span>\n            <span class=\"label-sm m-l-10 m-b-6\">USDT</span>\n          </Row>\n        </Column>\n      </Row>\n      <Column v-for=\"(row) in list\" :key=\"row\" class=\"w-100b p-30 p-b-0\">\n\n        <Row class=\"w-100b m-b-22\" x=\"sb\" y=\"s\">\n          <span class=\"label bold\">{{ row.taskTitle }}</span>\n          <span class=\"label-sm c-info\">{{ row.time ? dayjs(row.time).format(`YYYY-MM-DD HH:mm:ss`) : '--' }}</span>\n        </Row>\n        <Row class=\"w-100b label-sm  m-b-10\" x=\"sb\" y=\"s\">\n          <span class=\"c-info\">{{ $t('table.progress') }}</span>\n          <span class=\"\">{{ row.progress }}</span>\n        </Row>\n        <Row class=\"w-100b label-sm m-b-10\" x=\"sb\" y=\"s\">\n          <span class=\"c-info\">{{ $t('table.rewards') }}</span>\n          <span class=\"\">\n            <span class=\"m-r-4\">{{ row.rewardAmount }}</span>\n            <span>USDT</span>\n          </span>\n        </Row>\n        <Row class=\"w-100b label-sm m-b-10\" x=\"sb\" y=\"s\">\n          <span class=\"c-info\">{{ $t('table.status') }}</span>\n          <span :class=\"typetOptions.find(e => e.value == row.progressStatus)?.color\">{{ typetOptions.find(e => row.progressStatus == e.value)?.label }}</span>\n        </Row>\n        <div class=\"w-100b border-b m-t-30\" />\n      </Column>\n    </van-list>\n  </Page>\n</template>\n\n<script setup>\nimport { VoteList, FinishedList, DiaCoinApplication } from '@/view/vote/components'\n\nconst languageStore = useLanguageStore()\nconst route = useRoute()\n\nconst onClickLeft = () => {\n  router.go(-1)\n}\n\nlet loading = $ref(false)\nlet isRefresh = $ref(false)\nlet list = $ref([])\nlet total = $ref()\n\nconst pages = reactive({\n  ...PAGES,\n  // pageNum: 1,\n  // pageSize: 1000,\n})\n\nconst typetOptions = $computed(() => [\n  { label: $t('public.inProgress'), value: 0, color: 'c-warning' },\n  { label: $t('public.issued'), value: 1, color: 'c-success' },\n  { label: $t('public.finished'), value: 2, color: 'c-info' },\n])\n\nconst finished = $computed(() => {\n  if (loading == true) {\n    return true\n  } else if (list?.length == total) {\n    return true\n  } else {\n    return false\n  }\n})\n\nconst getData = async () => {\n  try {\n    loading = true\n    const body = {\n    }\n    const d = await activityApi.myReward(body)\n    list = d.filter(e => e.open).map((e, i) => ({ ...e, index: i + 1 })) ?? []\n    total = list?.length\n    if (isArray(list)) {\n      list.push(...ls)\n    } else {\n      list = ls\n    }\n  } finally {\n    loading = false\n  }\n}\n\nconst onRefresh = async () => {\n  try {\n    isRefresh = true\n    pages.pageNum = 1\n    const body = {\n    }\n    const d = await activityApi.myReward(body)\n    list = d.filter(e => e.open).map((e, i) => ({ ...e, index: i + 1 })) ?? []\n    total = list?.length\n  } finally {\n    isRefresh = false\n  }\n}\n\nconst onLoad = () => {\n  pages.pageNum = pages.pageNum + 1\n  getData()\n}\n// winMes.postParent('hiddenNaviBar')\n\nonBeforeMount(() => {\n  onRefresh()\n})\n\nonMounted(() => {})\n</script>\n\n<style lang=\"scss\">\n.MyVote {  }\n</style>\n"],"names":["useLanguageStore","useRoute","onClickLeft","router","go","loading","_ref","isRefresh","list","total","pages","reactive","PAGES","typetOptions","_computed","label","$t","value","color","finished","_a","length","onRefresh","async","pageNum","body","d","activityApi","myReward","filter","e","open","map","i","index","_b","onLoad","isArray","push","ls","getData","onBeforeMount","onMounted"],"mappings":"sgCA2DAA,IACAC,IAEA,MAAAC,EAAA,KACAC,EAAAC,IAAA,EAAA,EAGA,IAAAC,EAAAC,GAAA,GACAC,EAAAD,GAAA,GACAE,EAAAF,EAAA,IACAG,EAAAH,IAEA,MAAAI,EAAAC,EAAA,IACAC,IAKAC,EAAAC,GAAA,IAAA,CACA,CAAAC,MAAAC,GAAA,qBAAAC,MAAA,EAAAC,MAAA,aACA,CAAAH,MAAAC,GAAA,iBAAAC,MAAA,EAAAC,MAAA,aACA,CAAAH,MAAAC,GAAA,mBAAAC,MAAA,EAAAC,MAAA,aAGAC,EAAAL,GAAA,WACA,OAAA,GAAAT,EAAAY,QAEA,OAAAG,EAAAZ,EAAAS,YAAA,EAAAG,EAAAC,SAAAZ,EAAAQ,KAIA,IAqBAK,EAAAC,kBACA,IACAhB,EAAAU,OAAA,EACAP,EAAAc,QAAA,EACA,MAAAC,EAAA,CACA,EACAC,QAAAC,EAAAC,SAAAH,GACAjB,EAAAS,MAAA,OAAAG,IAAAS,QAAAC,GAAAA,EAAAC,OAAAC,KAAA,CAAAF,EAAAG,SAAAH,EAAAI,MAAAD,EAAA,SAAA,GACAxB,EAAAQ,MAAA,OAAAkB,EAAA3B,EAAAS,YAAA,EAAAkB,EAAAd,MAGA,CAFA,QACAd,EAAAU,OAAA,CACA,GAGAmB,EAAA,KACA1B,EAAAc,QAAAd,EAAAc,QAAA,EAjCAD,mBACA,IACAlB,EAAAY,OAAA,EACA,MAAAQ,EAAA,CACA,EACAC,QAAAC,EAAAC,SAAAH,GACAjB,EAAAS,MAAA,OAAAG,IAAAS,QAAAC,GAAAA,EAAAC,OAAAC,KAAA,CAAAF,EAAAG,SAAAH,EAAAI,MAAAD,EAAA,SAAA,GACAxB,EAAAQ,MAAA,OAAAkB,EAAA3B,EAAAS,YAAA,EAAAkB,EAAAd,OACAgB,EAAA7B,EAAAS,OACAT,EAAAS,MAAAqB,QAAAC,IAEA/B,EAAAS,MAAAsB,EAIA,CAFA,QACAlC,EAAAY,OAAA,CACA,GAmBAuB,EAAA,SAIAC,GAAA,KACAnB,GAAA,IAGAoB,GAAA"}