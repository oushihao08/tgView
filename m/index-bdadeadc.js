import{b as e,m as o,l as t,f as s,am as l,w as a,a8 as n,a6 as r,k as d,j as u,O as c,K as i,i as f,c as p,M as m,N as v,Z as y,P as b,u as g,U as h,S as C,R as w,W as k,$ as x,Q as E,r as M,n as I,g as $,aj as A,p as B,s as R,v as S,q as F,an as L,T as j,t as _}from"./vue-10f3042e.js";import{b as D,e as z,E as O,_ as T,w as P}from"./index-8763a24f.js";import{c as N,h as Y,b as q,u as X,w as U,j as W,g as H,p as V,k as K,q as Z,v as Q}from"./index-dea076ad.js";import{P as G}from"./vnode-bd4ab1c0.js";import{i as J,C as ee,a as oe}from"./index-ee5248b7.js";import{u as te}from"./index-4e954145.js";import{F as se,c as le,E as ae}from"./focus-trap-898cd3a3.js";import{U as ne}from"./typescript-58f7230d.js";import{u as re}from"./index-8561ad5c.js";import{t as de}from"./error-e384bc30.js";import{u as ue}from"./index-40dc497b.js";const ce=(e,o)=>{if(!N)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],s=Y(e,t);return["scroll","auto","overlay"].some((e=>s.includes(e)))},ie=(e,o)=>{if(!N)return;let t=e;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(ce(t,o))return t;t=t.parentNode}return t};let fe;const pe=Symbol("dialogInjectionKey"),me=(s,l,a)=>{let n={offsetX:0,offsetY:0};const r=e=>{const o=e.clientX,t=e.clientY,{offsetX:l,offsetY:a}=n,r=s.value.getBoundingClientRect(),d=r.left,u=r.top,c=r.width,i=r.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,m=-d+l,v=-u+a,y=f-d-c+l,b=p-u-i+a,g=e=>{const r=Math.min(Math.max(l+e.clientX-o,m),y),d=Math.min(Math.max(a+e.clientY-t,v),b);n={offsetX:r,offsetY:d},s.value.style.transform=`translate(${q(r)}, ${q(d)})`},h=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},d=()=>{l.value&&s.value&&l.value.removeEventListener("mousedown",r)};e((()=>{o((()=>{a.value?l.value&&s.value&&l.value.addEventListener("mousedown",r):d()}))})),t((()=>{d()}))},ve=e=>{s(e)||de("[useLockscreen]","You need to pass a ref param to this function");const o=X("popup"),t=l((()=>o.bm("parent","hidden")));if(!N||U(document.body,t.value))return;let r=0,d=!1,u="0";const c=()=>{setTimeout((()=>{H(document.body,t.value),d&&(document.body.style.width=u)}),200)};a(e,(e=>{if(!e)return void c();d=!U(document.body,t.value),d&&(u=document.body.style.width),r=(e=>{var o;if(!N)return 0;if(void 0!==fe)return fe;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const a=l.offsetWidth;return null==(o=t.parentNode)||o.removeChild(t),fe=s-a,fe})(o.namespace.value);const s=document.documentElement.clientHeight<document.body.scrollHeight,l=Y(document.body,"overflowY");r>0&&(s||"scroll"===l)&&d&&(document.body.style.width=`calc(100% - ${r}px)`),W(document.body,t.value)})),n((()=>c()))},ye=e=>{if(!e)return{onClick:r,onMousedown:r,onMouseup:r};let o=!1,t=!1;return{onClick:s=>{o&&t&&e(s),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const be=d({name:"ElOverlay",props:D({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:z([String,Array,Object])},zIndex:{type:z([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const s=X("overlay"),{onClick:l,onMousedown:a,onMouseup:n}=ye(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?u("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:a,onMouseup:n},[c(o,"default")],G.STYLE|G.CLASS|G.PROPS,["onClick","onMouseup","onMousedown"]):i("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[c(o,"default")])}}),ge=D({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:J},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),he=["aria-label"],Ce=["id"],we=d({name:"ElDialogContent"});var ke=T(d({...we,props:ge,emits:{close:()=>!0},setup(e){const o=e,{t:t}=te(),{Close:s}=ee,{dialogRef:l,headerRef:a,bodyId:n,ns:r,style:d}=f(pe),{focusTrapRef:i}=f(se),M=le(i,l),I=p((()=>o.draggable));return me(l,a,I),(e,o)=>(m(),v("div",{ref:g(M),class:b([g(r).b(),g(r).is("fullscreen",e.fullscreen),g(r).is("draggable",g(I)),g(r).is("align-center",e.alignCenter),{[g(r).m("center")]:e.center},e.customClass]),style:E(g(d)),tabindex:"-1"},[y("header",{ref_key:"headerRef",ref:a,class:b(g(r).e("header"))},[c(e.$slots,"header",{},(()=>[y("span",{role:"heading",class:b(g(r).e("title"))},h(e.title),3)])),e.showClose?(m(),v("button",{key:0,"aria-label":g(t)("el.dialog.close"),class:b(g(r).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[u(g(O),{class:b(g(r).e("close"))},{default:C((()=>[(m(),w(k(e.closeIcon||g(s))))])),_:1},8,["class"])],10,he)):x("v-if",!0)],2),y("div",{id:g(n),class:b(g(r).e("body"))},[c(e.$slots,"default")],10,Ce),e.$slots.footer?(m(),v("footer",{key:0,class:b(g(r).e("footer"))},[c(e.$slots,"footer")],2)):x("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const xe=D({...ge,appendToBody:{type:Boolean,default:!1},beforeClose:{type:z(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Ee={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>V(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Me=["aria-label","aria-labelledby","aria-describedby"],Ie=d({name:"ElDialog",inheritAttrs:!1});const $e=P(T(d({...Ie,props:xe,emits:Ee,setup(o,{expose:t}){const s=o,l=A();ue({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},p((()=>!!l.title))),ue({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},p((()=>!!s.customClass)));const n=X("dialog"),r=M(),d=M(),i=M(),{visible:f,titleId:v,bodyId:h,style:k,overlayDialogStyle:D,rendered:z,zIndex:O,afterEnter:T,afterLeave:P,beforeLeave:Y,handleClose:U,onModalClick:W,onOpenAutoFocus:H,onCloseAutoFocus:V,onCloseRequested:G,onFocusoutPrevented:J}=((o,t)=>{const s=$().emit,{nextZIndex:l}=re();let n="";const r=oe(),d=oe(),u=M(!1),c=M(!1),i=M(!1),f=M(o.zIndex||l());let m,v;const y=K("namespace",Z),b=p((()=>{const e={},t=`--${y.value}-dialog`;return o.fullscreen||(o.top&&(e[`${t}-margin-top`]=o.top),o.width&&(e[`${t}-width`]=q(o.width))),e})),g=p((()=>o.alignCenter?{display:"flex"}:{}));function h(){null==v||v(),null==m||m(),o.openDelay&&o.openDelay>0?({stop:m}=Q((()=>k()),o.openDelay)):k()}function C(){null==m||m(),null==v||v(),o.closeDelay&&o.closeDelay>0?({stop:v}=Q((()=>x()),o.closeDelay)):x()}function w(){o.beforeClose?o.beforeClose((function(e){e||(c.value=!0,u.value=!1)})):C()}function k(){N&&(u.value=!0)}function x(){u.value=!1}return o.lockScroll&&ve(u),a((()=>o.modelValue),(e=>{e?(c.value=!1,h(),i.value=!0,f.value=o.zIndex?f.value++:l(),I((()=>{s("open"),t.value&&(t.value.scrollTop=0)}))):u.value&&C()})),a((()=>o.fullscreen),(e=>{t.value&&(e?(n=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=n)})),e((()=>{o.modelValue&&(u.value=!0,i.value=!0,h())})),{afterEnter:function(){s("opened")},afterLeave:function(){s("closed"),s(ne,!1),o.destroyOnClose&&(i.value=!1)},beforeLeave:function(){s("close")},handleClose:w,onModalClick:function(){o.closeOnClickModal&&w()},close:C,doClose:x,onOpenAutoFocus:function(){s("openAutoFocus")},onCloseAutoFocus:function(){s("closeAutoFocus")},onCloseRequested:function(){o.closeOnPressEscape&&w()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:r,bodyId:d,closed:c,style:b,overlayDialogStyle:g,rendered:i,visible:u,zIndex:f}})(s,r);B(pe,{dialogRef:r,headerRef:d,bodyId:h,ns:n,rendered:z,style:k});const ee=ye(W),te=p((()=>s.draggable&&!s.fullscreen));return t({visible:f,dialogContentRef:i}),(e,o)=>(m(),w(_,{to:"body",disabled:!e.appendToBody},[u(j,{name:"dialog-fade",onAfterEnter:g(T),onAfterLeave:g(P),onBeforeLeave:g(Y),persisted:""},{default:C((()=>[R(u(g(be),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":g(O)},{default:C((()=>[y("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:g(v),"aria-describedby":g(h),class:b(`${g(n).namespace.value}-overlay-dialog`),style:E(g(D)),onClick:o[0]||(o[0]=(...e)=>g(ee).onClick&&g(ee).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>g(ee).onMousedown&&g(ee).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>g(ee).onMouseup&&g(ee).onMouseup(...e))},[u(g(ae),{loop:"",trapped:g(f),"focus-start-el":"container",onFocusAfterTrapped:g(H),onFocusAfterReleased:g(V),onFocusoutPrevented:g(J),onReleaseRequested:g(G)},{default:C((()=>[g(z)?(m(),w(ke,F({key:0,ref_key:"dialogContentRef",ref:i},e.$attrs,{"custom-class":e.customClass,center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:g(te),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,onClose:g(U)}),L({header:C((()=>[e.$slots.title?c(e.$slots,"title",{key:1}):c(e.$slots,"header",{key:0,close:g(U),titleId:g(v),titleClass:g(n).e("title")})])),default:C((()=>[c(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:C((()=>[c(e.$slots,"footer")]))}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Me)])),_:3},8,["mask","overlay-class","z-index"]),[[S,g(f)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{$e as E,ie as g};
//# sourceMappingURL=index-bdadeadc.js.map
