import{_ as e}from"./Page-f5afd189.js";import{I as a,B as o,S as l,A as r}from"./vant-f0b40d2b.js";/* empty css             *//* empty css                  *//* empty css                 */import{_ as s,a as t}from"./CodeButton-a2a1122f.js";/* empty css              */import{t as i,v as n,x as d,y as u,q as m,a as p,_ as c}from"../js/index-v1.1.28-fb871f79.js";import{r as f,a as h,c as v,w as g,L as b,M as A,R as w,S as y,j as C,y as j,U as P,P as _,N as k,ao as x,$ as S,Z as V,a0 as $,F as B}from"./vue-10f3042e.js";import{u as U}from"./vue-router-d1467f91.js";import{E as K}from"./index-6c2aa957.js";import{E as Q,a as E}from"./index-81717dbd.js";import{E as q}from"./index-6f1e790d.js";import"./vendor-f8157dbf.js";import"./__commonjsHelpers__-5b8a0dfb.js";import"./IconSvg-f87608f8.js";/* empty css               */import"./index-fc07082a.js";import"./index-8763a24f.js";import"./lodash-es-87d81e2d.js";import"./index-dea076ad.js";import"./index-40dc497b.js";import"./index-2f89133e.js";import"./index-ee5248b7.js";/* empty css                */import"./index-68d61afc.js";import"./index-5cef0a1f.js";import"./typescript-58f7230d.js";import"./aria-b0977c34.js";import"./index-8561ad5c.js";import"./vue-i18n-d608650a.js";import"./index-9ef2549a.js";import"./error-e384bc30.js";import"./async-validator-58962fa7.js";const R=j("Hi"),T={key:0},H={key:1,class:"c-info"},D={class:"c-black"},G={class:"w-100b m-b-20"},N=V("img",{class:"w-21 h-30 m-r-10",src:"data:image/webp;base64,UklGRmABAABXRUJQVlA4WAoAAAAQAAAAKQAAPAAAQUxQSMsAAAABgFTbdt3mQhAEQTAEQxCDikHMwI9BwqBmYDPQY2AzCASJwRs8/VeHHUTEBED/vIP0/567RdEGGf7K+SgTBgPARpnyBBBkUgcv2eeg7pwyEZ+Mx0jDShZWD8auGSf6qHG/IbvbCmQoQxVeytGM4gpZ/w6qSHYU6MkkdhjW91+qLUhtPJcBq7R+B1CTmInQzzZxjyOHhbj22kwDq7vQ22XcR8lriLkzi8/Ife693yGKTgBnJnSATXNcALCmGdgoGB6WNpQ9cer3XGShAQBWUDggbgAAABAEAJ0BKioAPQA+kTqSSCeSUZlVmFgJBLKAZR4aw93e9tbxhcbNoU6AAP7n5KE5xdgd2lNkCuevq4hTCZKrSPVa6uemhIiN54f6A2///ia8zgiqVWAHVKHyRHNhlD0wyQE7r0JtiHsuSewUQAAA"},null,-1),I=["src"],L={class:"c-info font-28"},Z={__name:"Register",setup(Z){var z,J,M,W,O;const X=U(),F={phone:1,email:2};let Y=f(!0);const ee=f(null);let ae=f(F.phone),oe=f(!1),le=f([]);const re=f(""),se=f(!1);let te=f("");const ie=()=>{if(!re.value)return le.value;const e=["phoneAreaCode","nationalityName"];return le.value.filter((a=>-1!==a[e[0]].toString().indexOf(re.value.toString())||-1!==a[e[1]].toString().indexOf(re.value.toString())))};let ne=f(!1);const de=h({phoneAreaCode:sessionStorage.phoneAreaCode,phone:null!=(z=sessionStorage.phone)?z:"",email:null!=(J=sessionStorage.email)?J:"",loginPassword:null!=(M=sessionStorage.loginPassword)?M:"",verificationCode:null!=(W=sessionStorage.verificationCode)?W:"",inviteCode:null!=(O=X.query.inviteCode)?O:""});let ue=f(!1);const me=v((()=>{const e=Object.keys(F).find((e=>ae.value==F[e]));return[!se.value,i(de[e],de.loginPassword,de.verificationCode)].some((e=>e))})),pe={phone:[{required:!0,message:$t("form.inputPl","form.phone"),trigger:"blur"},{validator:n.el.check(n.re.phone,{errorText:()=>$t("form.phoneError")}),trigger:"blur"},{validator:n.el.check(n.re.lan,{errorText:()=>$t("form.inputPl","form.passwordLengthPassError","public.de","form.phone")}),trigger:"blur"}],email:[{required:!0,message:$t("form.inputPl","form.email"),trigger:"blur"},{validator:(e,a,o)=>n.re.checkEmail(e,a,o),trigger:"blur"}],verificationCode:[{required:!0,message:$t("form.inputPl","form.verifyCode"),trigger:"blur"}],loginPassword:[{required:!0,message:$t("form.inputPl","form.password"),trigger:"blur"}]},ce=()=>{d(`/help?name=userAgreement&${location.search.replace("?","")}`)},fe=e=>{ae.value=e},he=async()=>(1===ae.value?(await n.el.field(ee.value,"phone"),te.value=de.phone):(await n.el.field(ee.value,"email"),te.value=de.email),!0),ve=v((()=>[Object.keys(F).find((e=>ae.value==F[e])),"verificationCode","loginPassword"])),ge=async()=>{try{if(await n.el.field(ee.value,ve.value),!se.value)return void showNotify({type:"danger",message:$t("form.readPl","form.userAgreement")});oe.value=!0;const e={...de,registerWay:ae.value,loginPassword:u.md5(de.loginPassword)};ae.value==F.phone&&delete e.email,ae.value==F.email&&(delete e.phone,delete e.phoneAreaCode);await m.registered(e);d(`/user/registerSuccess?${location.search.replace("?","")}`)}catch(e){ue.value=!de.loginPassword}finally{oe.value=!1}};return g((()=>de.phoneAreaCode),(e=>{})),g((()=>de.phone),(e=>{sessionStorage.phone=e})),g((()=>de.email),(e=>{sessionStorage.email=e})),g((()=>de.loginPassword),(e=>{sessionStorage.loginPassword=e})),g((()=>de.verificationCode),(e=>{sessionStorage.verificationCode=e})),g((()=>ae.value),(e=>{Y.value=!1,setTimeout((()=>{Y.value=!0}))})),b((()=>{(async()=>{var e;const a=await m.areaList();le.value=a,de.phoneAreaCode=null==(e=le.value[0])?void 0:e.phoneAreaCode})()})),(i,n)=>{const d=p,u=c,m=a,f=K,h=Q,v=s,g=t,b=q,U=o,Z=E,z=l,J=r,M=e;return A(),w(M,{bodyClass:"Register p-lr-60 p-t-40 p-b-100",title:i.$t("form.register")},{default:y((()=>[C(u,{class:"w-100b font-54"},{default:y((()=>[C(d,null,{default:y((()=>[R])),_:1}),C(d,null,{default:y((()=>[j(P(i.$t("user.registerTitle")),1)])),_:1})])),_:1}),C(d,{class:"label h-88 m-t-10 m-b-30",y:"c"},{default:y((()=>[C(d,{class:_([ae.value==F.phone?"c-primary tab-active":"c-info","tab transition h-88 m-r-60"]),y:"c",onClick:n[0]||(n[0]=e=>fe(F.phone))},{default:y((()=>[j(P(i.$t("form.phone")),1)])),_:1},8,["class"]),C(d,{class:_([ae.value==F.email?"c-primary tab-active":"c-info","tab transition h-88"]),y:"c",onClick:n[1]||(n[1]=e=>fe(F.email))},{default:y((()=>[j(P(i.$t("form.email")),1)])),_:1},8,["class"])])),_:1}),C(Z,{ref_key:"formRef",ref:ee,model:de,rules:pe,class:"w-100b f-column"},{default:y((()=>[ae.value==F.phone?(A(),w(h,{key:"phone",class:"m-b-40 phone position-r",prop:"phone"},{error:y((({error:e})=>[C(d,{class:"w-100b c-error label-sm lh-no m-t-5"},{default:y((()=>[j(P(e),1)])),_:2},1024)])),default:y((()=>[C(d,{class:"position-a-tl w-150 h-88 p-l-20 z-1",y:"c",x:"sb",onClick:n[2]||(n[2]=()=>ne.value=!0)},{default:y((()=>[de.phoneAreaCode?(A(),k("span",T,P(de.phoneAreaCode),1)):(A(),k("span",H,P(i.$t("form.selectpl")),1)),C(m,{class:"label-sm c-info",name:"arrow-down"})])),_:1}),C(f,{modelValue:de.phone,"onUpdate:modelValue":n[3]||(n[3]=e=>de.phone=e),class:"f-1",placeholder:i.$t("form.inputPl","form.phone"),onKeyup:x(ge,["enter"])},null,8,["modelValue","placeholder","onKeyup"])])),_:1})):S("",!0),ae.value==F.email?(A(),w(h,{key:"email",class:"m-b-40",prop:"email"},{error:y((({error:e})=>[C(d,{class:"w-100b c-error label-sm lh-no m-t-5"},{default:y((()=>[j(P(e),1)])),_:2},1024)])),default:y((()=>[C(f,{modelValue:de.email,"onUpdate:modelValue":n[4]||(n[4]=e=>de.email=e),modelModifiers:{trim:!0},placeholder:i.$t("form.inputPl","form.email"),onKeyup:x(ge,["enter"])},null,8,["modelValue","placeholder","onKeyup"])])),_:1})):S("",!0),C(h,{key:"verificationCode",class:"m-b-40 position-r",prop:"verificationCode"},{error:y((()=>[C(d,{class:"w-100b c-error label-sm lh-no m-t-5"},{default:y((()=>[j(P(i.$t("form.inputPl","form.verifyCode")),1)])),_:1})])),default:y((()=>[Y.value?(A(),w(d,{key:0,class:"w-100b position-r"},{default:y((()=>[C(f,{modelValue:de.verificationCode,"onUpdate:modelValue":n[5]||(n[5]=e=>de.verificationCode=e),maxlength:6,placeholder:i.$t("form.verifyCode"),onInput:n[6]||(n[6]=e=>de.verificationCode=e.replace(/[^0-9]/g,"")),onKeyup:x(ge,["enter"])},null,8,["modelValue","placeholder","onKeyup"]),C(v,{class:"m-l-20 h-100b h-88 p-r-20",account:te.value,beforeClick:he,type:"0",phoneAreaCode:ae.value==F.phone?de.phoneAreaCode:""},null,8,["account","phoneAreaCode"])])),_:1})):S("",!0)])),_:1}),C(h,{class:"m-b-40",prop:"loginPassword"},{error:y((()=>[C(d,{class:"w-100b c-error label-sm lh-no m-t-5"})])),default:y((()=>[C(g,{modelValue:de.loginPassword,"onUpdate:modelValue":n[7]||(n[7]=e=>de.loginPassword=e),placeholder:i.$t("form.inputPl","form.password"),showPwdStrengt:!1,onKeyup:x(ge,["enter"]),onBlur:n[8]||(n[8]=()=>ue.value=!de.loginPassword)},null,8,["modelValue","placeholder","onKeyup"]),C(d,{class:_(["label-sm lh-no m-t-5",ue.value?"c-error":"c-info"])},{default:y((()=>[j(P(i.$t("form.passwordLengthPassError")),1)])),_:1},8,["class"])])),_:1}),C(h,{class:"m-b-40",prop:"inviteCode"},{default:y((()=>[C(f,{modelValue:de.inviteCode,"onUpdate:modelValue":n[9]||(n[9]=e=>de.inviteCode=e),placeholder:i.$t("form.inputPl","form.inviteCode"),onKeyup:x(ge,["enter"])},null,8,["modelValue","placeholder","onKeyup"])])),_:1}),C(d,{class:"w-100b m-b-10 label",y:"c"},{default:y((()=>[C(b,{modelValue:se.value,"onUpdate:modelValue":n[10]||(n[10]=e=>se.value=e),size:"large",class:"m-r-10"},null,8,["modelValue"]),V("span",D,P(i.$t("form.readAndAccept")),1),V("span",{class:"c-primary break-word m-l-10",onClick:ce},P(i.$t("form.userAgreement")),1)])),_:1}),V("div",G,[C(U,{class:"w-100b title-sm",type:"primary",loading:oe.value,disabled:me.value,onClick:ge},{default:y((()=>[j(P(i.$t("form.register")),1)])),_:1},8,["loading","disabled"])]),C(d,{class:"w-100b c-info label-sm p-10",x:"c",onClick:n[11]||(n[11]=()=>i.router.push("/goDownload"))},{default:y((()=>[N,V("span",null,P(i.$t("public.appDownload")),1)])),_:1})])),_:1},8,["model"]),C(J,{show:ne.value,"onUpdate:show":n[15]||(n[15]=e=>ne.value=e),class:"h-100b",round:!1},{default:y((()=>[C(z,{modelValue:re.value,"onUpdate:modelValue":n[13]||(n[13]=e=>re.value=e),"show-action":"",shape:"round",placeholder:i.$t("user.plsCountryCode"),onCancel:n[14]||(n[14]=()=>ne.value=!1)},{action:y((()=>[C(d,{class:"font-24",onClick:n[12]||(n[12]=e=>ne.value=!1)},{default:y((()=>[j(P(i.$t("alert.cancel")),1)])),_:1})])),_:1},8,["modelValue","placeholder"]),(A(!0),k(B,null,$(ie(le.value),((e,a)=>(A(),w(d,{key:a,y:"c",x:"sb",class:"h-88 p-lr-30",onClick:a=>(e=>{de.phoneAreaCode=e.phoneAreaCode,ne.value=!1})(e)},{default:y((()=>[C(d,{class:"font-28"},{default:y((()=>[V("img",{src:e.icon,onerror:"this.src='/image/backup.webp'",class:"w-34 h-24 radius-2 m-r-17"},null,8,I),V("span",null,P(e.nationalityName),1)])),_:2},1024),V("span",L,P(e.phoneAreaCode),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["show"])])),_:1},8,["title"])}}};export{Z as default};
//# sourceMappingURL=Register-86ce7456.js.map
